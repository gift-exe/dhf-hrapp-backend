FROM python:3.11

WORKDIR /

COPY requirements.txt .

RUN pip install -r requirements.txt

COPY . .

ARG SECRET_KEY

ARG ALGORITHM

ARG ACCESS_TOKEN_EXPIRE_MINUTES

ARG DB_URI

ARG SPACE_REGION

ARG SPACE_NAME

ARG SPACE_KEY

ARG SPACE_SECRET

ARG SPACE_ENDPOINT

ARG SPACE_EDGE_ENDPOINT

ENV SECRET_KEY=$SECRET_KEY

ENV ALGORITHM=$ALGORITHM

ENV ACCESS_TOKEN_EXPIRE_MINUTES=$COHERE_API_KEY

ENV DB_URI=$DB_URI

ENV SPACE_REGION=$SPACE_REGION

ENV SPACE_NAME=$SPACE_NAME

ENV SPACE_KEY=$SPACE_KEY

ENV SPACE_SECRET=$SPACE_SECRET

ENV SPACE_ENDPOINT=$SPACE_ENDPOINT

ENV SPACE_EDGE_ENDPOINT=$SPACE_EDGE_ENDPOINT

EXPOSE 80

CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "80"]
